A light-\/weight O\+OP wrapper for various target languages that allows developers to interface with the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine.

We use the \href{http://www.swig.org}{\tt S\+W\+IG} library to generate language-\/specific extensions from C++ for us.

The following languages are supported with more planned\+:


\begin{DoxyItemize}
\item Python
\item P\+HP
\item C\#
\end{DoxyItemize}

While building from source allows complete control over the compile process, we have elected to also release binaries for popular platforms.

You can\+:
\begin{DoxyItemize}
\item Create and destroy workspaces, using multiple for threaded situations
\item Compile, save, load and execute programs.
\item Manipulate data in the symbol table
\item Set up callbacks for integration with \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS}\textquotesingle{}s input/output routines
\end{DoxyItemize}

\subsection*{Configuration}

The A\+PI will look for the {\ttfamily M\+T\+E\+N\+G\+H\+O\+ME} environment variable. This will be the location the engine was extracted to (i.\+e. {\ttfamily C\+:\textbackslash{}mteng} on Windows, {\ttfamily \$\+H\+O\+ME/mteng} on Linux)

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Variable }&\textbf{ Value  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Variable }&\textbf{ Value  }\\\cline{1-2}
\endhead
{\ttfamily M\+T\+E\+N\+G\+H\+O\+ME} &{\ttfamily /home/user/mteng} \\\cline{1-2}
\end{longtabu}
The following environment variables must {\bfseries contain} the specified values

\subsubsection*{Windows}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Variable }&\textbf{ Value  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Variable }&\textbf{ Value  }\\\cline{1-2}
\endhead
{\ttfamily P\+A\+TH} &Append {\ttfamily C\+:\textbackslash{}mteng} \\\cline{1-2}
\end{longtabu}
The presence of this value allows the engine D\+LL to be found and loaded properly.

Ensure you do not {\bfseries replace} {\ttfamily P\+A\+TH} with the directory.

\subsubsection*{Linux}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Variable }&\textbf{ Value  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Variable }&\textbf{ Value  }\\\cline{1-2}
\endhead
{\ttfamily L\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+P\+A\+TH} &Append {\ttfamily /home/user/mteng} \\\cline{1-2}
\end{longtabu}
Note\+: Please adjust the paths accordingly to your specific installation.

\subsubsection*{S\+W\+IG}

If you are building from source, you will need to have the S\+W\+IG library available\+:

\href{http://www.swig.org/download.html}{\tt http\+://www.\+swig.\+org/download.\+html}

Once installed, please ensure {\ttfamily swig} is available in your terminal by placing its installation directory in your {\ttfamily P\+A\+TH} environment variable, as building requires it.

{\bfseries E\+X\+C\+E\+P\+T\+I\+ON}\+: If you are not {\itshape modifying} any source files, the auto generated files have been included in the respective {\ttfamily python} and {\ttfamily php} sub-\/directories. Please refer to php5/php7 based on the version of P\+HP being used.

\subsection*{Installation}

Please refer to the vendor documentation for language-\/level installation.

\subsubsection*{Python}

The Python installation uses the {\ttfamily distribute} package.

\subsubsection*{Binary}

\paragraph*{Windows}

Select the correct {\ttfamily egg} file according to your architecture.

Please ensure your Python installation contains the {\ttfamily setuptools} package, which provides the {\ttfamily easy\+\_\+install} application.

Instructions and files can be found at\+: \href{https://pypi.python.org/pypi/setuptools#windows}{\tt https\+://pypi.\+python.\+org/pypi/setuptools\#windows} \begin{DoxyVerb}$ easy_install ge-0.3.2-py3.6-win-amd64.egg
\end{DoxyVerb}


\paragraph*{Linux}

\begin{DoxyVerb}$ easy_install ge-0.3.2-py3.6-linux-x86_64.egg
\end{DoxyVerb}


\subsubsection*{Source}

If using Windows, please ensure the following are correctly in your {\ttfamily P\+A\+TH} environment variable \begin{DoxyVerb}C:\Python36\;C:\Python36\Scripts\
\end{DoxyVerb}


Note\+: Tested with Python 3.\+6 (M\+S\+VC 2015)

Just like the traditional {\ttfamily make \&\& make install}, compiling a Python extension requires 2 steps\+:


\begin{DoxyCode}
python setup.py build\_ext -i
python setup.py install
\end{DoxyCode}


\paragraph*{Linux or Cygwin}


\begin{DoxyCode}
# The setup.py utilizes the 'MTENGHOME' environment variable.
# Please ensure this is set appropriately to your GAUSS Engine installation directory.
tar -xvf ge-0.3.2.tar.gz
cd ge-0.3.2
python setup.py build\_ext -i      # First build the extension and create the ge.py file
python setup.py install           # Everything compiled, now install

# ROOT ONLY
# If installation must be done as root, force set the environment variable
tar -xvf ge-0.3.2.tar.gz
cd ge-0.3.2
export MTENGHOME=/home/user/mteng
# If you need customized wrapper~
python setup.py build\_ext -i # First build the extension and create the ge.py file
python setup.py install      # Everything compiled, now install
\end{DoxyCode}


\paragraph*{Windows}

Due to {\ttfamily mteng.\+dll} being compiled with Visual Studio 2015, it is necessary at this time to use M\+S\+VC to compile the Python extension.

All commands are run through the appropriate Visual Studio command prompt.

32-\/bit\+: {\ttfamily Start -\/$>$ Microsoft Visual Studio 2015 -\/$>$ Visual Studio Tools -\/$>$ Visual Studio 2015 Command Prompt}

64-\/bit\+: {\ttfamily Start -\/$>$ Microsoft Visual Studio 2015 -\/$>$ Visual Studio Tools -\/$>$ Visual Studio 2015 x64 Win64 Command Prompt}

If your user lacks permissions to access the Python installation directory, you may have to run {\ttfamily cmd} as Administrator

Execute the following via a {\ttfamily cmd} terminal\+:


\begin{DoxyCode}
# The setup.py utilizes the 'MTENGHOME' environment variable.
# Please ensure this is set appropriately to your GAUSS Engine installation directory or set it on the
       command line.
# unzip ge-0.3.2.zip to a directory of your choice
cd ge-0.3.2
set MTENGHOME=C:\(\backslash\)mteng
python setup.py build\_ext -i      # First build the extension and create the ge.py file
python setup.py install           # Everything compiled, now install
\end{DoxyCode}


If you omit the {\ttfamily build\+\_\+ext -\/i} step, the {\ttfamily ge.\+py} generated file will {\bfseries N\+OT} be placed in Python package directory.

The result of this behavior is the following when attempting to {\ttfamily import ge}\+:


\begin{DoxyCode}
>>> \textcolor{keyword}{import} ge
Traceback (most recent call last):
  File \textcolor{stringliteral}{"<stdin>"}, line 1, \textcolor{keywordflow}{in} <module>
ImportError: No module named ge
\end{DoxyCode}


\subsubsection*{P\+HP (Linux Only)}

\paragraph*{Source}

\href{http://www.cmake.org}{\tt C\+Make} is our build tool of choice for building the P\+HP extension.

Currently, only Linux is supported/tested. The C\+Make file uses information from the {\ttfamily php-\/config} binary to configure itself appropriately.

The following commands are executed from the root of the source path\+: \begin{DoxyVerb}$ mkdir build
$ cd build
# You could also use cmake-gui to create the Makefile
\end{DoxyVerb}


To use the pre-\/generated wrappers, configure as follows\+: \begin{DoxyVerb}$ cmake -DMTENGHOME=/home/user/mteng -G"Unix Makefiles" ..
\end{DoxyVerb}


If you have modified source files and need to regenerate the wrappers\+: \begin{DoxyVerb}$ cmake -DMTENGHOME=/home/user/mteng -G"Unix Makefiles" -DSWIG=ON ..
\end{DoxyVerb}


Now build the extension \begin{DoxyVerb}$ make
\end{DoxyVerb}


You should now have a {\ttfamily ge.\+so} file, as well as {\ttfamily ge.\+php}, in your current directory.

This will need to be used with any project that makes use of the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine, as the first line of any program will be \begin{DoxyVerb}include("ge.php");
\end{DoxyVerb}


\paragraph*{Binary}

Place the {\ttfamily ge.\+so} file in your P\+HP installation\textquotesingle{}s extension directory. If a valid directory was found during the C\+Make configuration phase, you can run {\ttfamily make installext} to automatically copy the newly built library into the appropriate extension directory.

If you prefer to do this manually, the location can be found by either\+:


\begin{DoxyEnumerate}
\item {\ttfamily php-\/config -\/-\/extension-\/dir}
\item Looking for the {\ttfamily extension\+\_\+dir} value in your {\ttfamily php.\+ini} file.
\end{DoxyEnumerate}

For use with a web server, the extension must be loaded directly by P\+HP, requiring the following change to your {\ttfamily php.\+ini}\+: \begin{DoxyVerb}; load gauss engine extension
extension=ge.so
\end{DoxyVerb}


If running P\+HP from the command line, changes should be instantaneous.

Please refresh services that utilize P\+HP to pick up on the new extension.

\subsection*{Development}

This section introduces an implementation of the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine.

\subsubsection*{Hello World!}

Getting started with the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine is extremely simple.

This assumes the library has been made available to the target language properly.

The following snippet will be described step-\/by-\/step in detail\+:

\paragraph*{Python}


\begin{DoxyCode}
\textcolor{keyword}{from} ge \textcolor{keyword}{import} GAUSS, IGEProgramOutput

\textcolor{keyword}{class }Output(\hyperlink{class_i_g_e_program_output}{IGEProgramOutput}):
    \textcolor{keyword}{def }invoke(self, message):
        \textcolor{keywordflow}{print} message,

ge = \hyperlink{class_g_a_u_s_s}{GAUSS}()

out = Output()
ge.setProgramOutputAll(out)

\textcolor{keywordflow}{if} \textcolor{keywordflow}{not} ge.initialize():
    \textcolor{keywordflow}{print} \textcolor{stringliteral}{"Initialization failed."}
    sys.exit(1)     \textcolor{comment}{# import sys for usage}

ge.executeString(\textcolor{stringliteral}{"print \(\backslash\)"Hello World!\(\backslash\)""})
ge.shutdown()
\end{DoxyCode}


\paragraph*{P\+HP}


\begin{DoxyCode}
include(\textcolor{stringliteral}{"ge.php"});

\textcolor{keyword}{class }Output \textcolor{keyword}{extends} \hyperlink{class_i_g_e_program_output}{IGEProgramOutput} \{
    \textcolor{keyword}{function} invoke($message) \{
        echo $message;
    \}
\}

$ge = \textcolor{keyword}{new} \hyperlink{class_g_a_u_s_s}{GAUSS}();

$out = \textcolor{keyword}{new} Output();

$ge->setProgramOutputAll($out);

\textcolor{keywordflow}{if} (!$ge->initialize()) \{
    echo \textcolor{stringliteral}{"Initialization failed."};
    \textcolor{keywordflow}{return};
\}

$ge->executeString(\textcolor{stringliteral}{"print \(\backslash\)"Hello World!\(\backslash\)""});
$ge->shutdown();
\end{DoxyCode}


\subsubsection*{Step 1\+: Import the required library}

Before we can make use of the functionality, we have to make the engine library available to us. This is quite simple and straight-\/forward.

\paragraph*{Python}


\begin{DoxyCode}
\textcolor{keyword}{from} ge \textcolor{keyword}{import} GAUSS, IGEProgramOutput
\end{DoxyCode}


\paragraph*{P\+HP}


\begin{DoxyCode}
include(\textcolor{stringliteral}{"ge.php"});
\end{DoxyCode}


If you compiled from source and you\textquotesingle{}re not sure where {\ttfamily ge.\+php} is, it will be in the {\ttfamily build} directory.

\subsubsection*{Step 2\+: Instantiate the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine object}

After importing the correct library, we need to instantiate our engine object. There are multiple constructors available that suit a variety of scenarios.

In this example, we will be using the default constructor. This method relies on an existing environment variable in an effort to locate the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} home directory.

By default, this environment variable is {\ttfamily M\+T\+E\+N\+G\+H\+O\+ME}.

\paragraph*{Python}


\begin{DoxyCode}
ge = \hyperlink{class_g_a_u_s_s}{GAUSS}()  \textcolor{comment}{# Look up value for MTENGHOME}
\end{DoxyCode}


\paragraph*{P\+HP}


\begin{DoxyCode}
$ge = \textcolor{keyword}{new} \hyperlink{class_g_a_u_s_s}{GAUSS}();  \textcolor{comment}{// Look up value for MTENGHOME}
\end{DoxyCode}


{\bfseries Hint\+:} Check out the {\ttfamily \hyperlink{class_g_a_u_s_s}{G\+A\+U\+S\+S(string)}} constructor, as it allows you to pass in a custom environment variable to use.

\subsubsection*{Step 3\+: Set up callbacks}

Technically, this step {\itshape can} be skipped, but creating appropriate callbacks allows you control over specific aspects of program functionality.

While some of these must be implemented to work correctly (i.\+e. setting a string input callback), others have default implementations that don\textquotesingle{}t necessarily require a callback (i.\+e. program output routing to {\ttfamily stdout}), it is generally a good idea to do so.

The following 3 steps are core to setting up a callback\+:
\begin{DoxyEnumerate}
\item Define the callback by deriving one of the available callback classes
\item Set the {\ttfamily thisown} property to {\bfseries 0} (release ownership) if the object would go out of scope before the {\ttfamily \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS}} object
\item Assign the callback
\end{DoxyEnumerate}

Pretty straight-\/forward!

We first define a callback class, inheriting the appropriate base class; in this case \hyperlink{class_i_g_e_program_output}{I\+G\+E\+Program\+Output}.

Simply override the callback method {\ttfamily invoke} and print out the {\ttfamily message} argument.

{\bfseries Important Note\+:}

We must set the {\ttfamily thisown} property of the newly instantiated object to {\ttfamily 0} if it will go out of scope before the {\ttfamily \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS}} object

This is necessary because ownership of this object will be transferred to the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} object.

Without setting this, if the {\ttfamily out} var was to go out of scope, it could be deleted and \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} will now attempt to reference a non-\/existent callback.

\paragraph*{Python}


\begin{DoxyCode}
\textcolor{comment}{# Step 1}
\textcolor{keyword}{class }Output(\hyperlink{class_i_g_e_program_output}{IGEProgramOutput}):
    \textcolor{keyword}{def }invoke(self, message):
        \textcolor{keywordflow}{print} message,

\textcolor{comment}{# Step 2}
out = Output().\_\_disown\_\_() \textcolor{comment}{# Prevent garbage collection}

\textcolor{comment}{# Step 3}
ge.setProgramOutputAll(out)
\end{DoxyCode}


\paragraph*{P\+HP}


\begin{DoxyCode}
\textcolor{comment}{// Step 1}
\textcolor{keyword}{class }Output \textcolor{keyword}{extends} \hyperlink{class_i_g_e_program_output}{IGEProgramOutput} \{
    \textcolor{keyword}{function} invoke($message) \{
        echo $message;
    \}
\}

$out = \textcolor{keyword}{new} Output();

\textcolor{comment}{// Step 2}
$out->thisown = 0; \textcolor{comment}{// Prevent garbage collection}

\textcolor{comment}{// Step 3}
$ge->setProgramOutputAll($out);
\end{DoxyCode}


{\itshape Note\+:} We used the \hyperlink{class_g_a_u_s_s_a0b8379c48d677e05aeab433dba66fbb6}{G\+A\+U\+S\+S.\+set\+Program\+Output\+All} method, which is used to set {\itshape both} the program and error output.

If you wish to separate the callbacks for different functionality, you can use the \hyperlink{class_g_a_u_s_s_a7f0dc6b5b307aa06c347f9c6a9fdacab}{G\+A\+U\+S\+S.\+set\+Program\+Output} and \hyperlink{class_g_a_u_s_s_abd75266b2c4075da75163fe95b013ef3}{G\+A\+U\+S\+S.\+set\+Program\+Error\+Output} methods.

\subsubsection*{Step 4\+: Initialize the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine}

Now that you\textquotesingle{}ve made it to this step, if all has been configured correctly, initializing the Engine is quite easy.

\paragraph*{Python}


\begin{DoxyCode}
\textcolor{keywordflow}{if} \textcolor{keywordflow}{not} ge.initialize():
    \textcolor{keywordflow}{print} \textcolor{stringliteral}{"Initialization failed."}
    sys.exit(1)
\end{DoxyCode}


\paragraph*{P\+HP}


\begin{DoxyCode}
\textcolor{keywordflow}{if} (!$ge->initialize()) \{
    echo \textcolor{stringliteral}{"Initialization failed."};
    \textcolor{keywordflow}{return};
\}
\end{DoxyCode}


The {\ttfamily initialize} method returns a true/false value depending on whether it was successful or not.

\subsubsection*{Step 5\+: Home Free}

With everything set up, we are free to run whatever code we choose!

For this small example, we just want the engine to tell us \char`\"{}\+Hello World!\char`\"{} through the callback we\textquotesingle{}ve assigned.

\paragraph*{Python}


\begin{DoxyCode}
ge.executeString(\textcolor{stringliteral}{"print \(\backslash\)"Hello World!\(\backslash\)""})
\end{DoxyCode}


\paragraph*{P\+HP}


\begin{DoxyCode}
$ge->executeString(\textcolor{stringliteral}{"print \(\backslash\)"Hello World!\(\backslash\)""});
\end{DoxyCode}


will result in the output\+:


\begin{DoxyCode}
Hello World!
\end{DoxyCode}


\subsubsection*{Step 6\+: Shutdown the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine}

Shutting down the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine is as easy as telling it to do so\+:

\paragraph*{Python}


\begin{DoxyCode}
ge.shutdown()
\end{DoxyCode}


\paragraph*{P\+HP}


\begin{DoxyCode}
$ge->shutdown();
\end{DoxyCode}


This will destroy any active workspaces and perform any cleanup that might be necessary.

\subsection*{Conclusion}

This wraps up the basics of using the \hyperlink{class_g_a_u_s_s}{G\+A\+U\+SS} Engine A\+PI. The documentation is full of code snippets that should help you easily interface with the Engine for your chosen task.

A template file has also been included which represents a full setup and tear-\/down with space in the middle to drop in code snippets. This file will be aptly named in relation to the language it applies to\+:

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Language }&\textbf{ Filename  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Language }&\textbf{ Filename  }\\\cline{1-2}
\endhead
Python &{\ttfamily python/template\+\_\+example.\+py} \\\cline{1-2}
P\+HP &{\ttfamily php/template\+\_\+example.\+php} \\\cline{1-2}
\end{longtabu}
\subsubsection*{Unit Tests}

Some simple unit tests have also been provided. The P\+HP unit test example uses \href{https://phpunit.de}{\tt P\+HP Unit} and can ran accordingly\+: \begin{DoxyVerb}php -f phpunit.phar unit_test.php
\end{DoxyVerb}


The C\+Make configure stage will also attempt to locate a P\+H\+P\+Unit binary, and if found, will offer a \textquotesingle{}unittest\textquotesingle{} make target that can be used\+: \begin{DoxyVerb}make unittest\end{DoxyVerb}
 